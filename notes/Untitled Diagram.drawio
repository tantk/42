<mxfile host="app.diagrams.net" modified="2023-11-01T09:41:14.992Z" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36" etag="5IpPg0vA0uCRXs2n9YrX" version="22.0.8" type="github">
  <diagram name="Page-1" id="S5-0JtYaMWdxEyBJnW1v">
    <mxGraphModel dx="1006" dy="2033" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="DZKNoQdhy6jW-IzfUURD-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DZKNoQdhy6jW-IzfUURD-2" target="DZKNoQdhy6jW-IzfUURD-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="DZKNoQdhy6jW-IzfUURD-2" target="DZKNoQdhy6jW-IzfUURD-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DZKNoQdhy6jW-IzfUURD-2" value="&lt;font style=&quot;font-size: 30px;&quot;&gt;main&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DZKNoQdhy6jW-IzfUURD-3" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;Err == -1&lt;br&gt;Exit Failure&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="DZKNoQdhy6jW-IzfUURD-5" target="Xo_m1RiFRlMSzJI0WYCG-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="DZKNoQdhy6jW-IzfUURD-5" target="Xo_m1RiFRlMSzJI0WYCG-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DZKNoQdhy6jW-IzfUURD-5" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;u&gt;Pipex func&lt;/u&gt;&lt;br&gt;&lt;ol&gt;&lt;li&gt;Init Proc&lt;/li&gt;&lt;li&gt;Exec Pipe&lt;/li&gt;&lt;/ol&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="240" y="45" width="200" height="130" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shape=link;" edge="1" parent="1" source="Xo_m1RiFRlMSzJI0WYCG-1" target="Xo_m1RiFRlMSzJI0WYCG-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-1" value="&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;typedef struct s_proc{&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;int&amp;nbsp; &amp;nbsp; &amp;nbsp;pipe_fd[2];&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;int&amp;nbsp; &amp;nbsp; &amp;nbsp;iofile_fd[2];&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;pid_t&amp;nbsp; &amp;nbsp;pid;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;char&amp;nbsp; &amp;nbsp; **cmd_arr;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;char&amp;nbsp; &amp;nbsp; **exec_env;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;char&amp;nbsp; &amp;nbsp; *prog_path;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;int&amp;nbsp; &amp;nbsp; &amp;nbsp;prev_read_fd;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp;}&amp;nbsp; &amp;nbsp;t_proc;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="360" y="-240" width="230" height="240" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-2" value="&lt;div style=&quot;border-color: var(--border-color); text-align: left; font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp;typedef struct s_lst_holder{&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); text-align: left; font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;t_lst&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;*head;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); text-align: left; font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;t_lst&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;*last;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); text-align: left; font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;unsigned int&amp;nbsp; &amp;nbsp; size;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); text-align: left; font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp;}&amp;nbsp; &amp;nbsp;t_hld;&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="-240" width="260" height="150" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-3" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;iofile_fd are file descriptor for infile and outfile&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="640" y="-240" width="160" height="90" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="Xo_m1RiFRlMSzJI0WYCG-7" target="Xo_m1RiFRlMSzJI0WYCG-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-7" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;u&gt;Init Proc func&lt;/u&gt;&lt;br&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Populate t_proc&lt;/span&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;Mostly 0 or NULL&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;pop_filefd&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;exec_env = envp from main&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="570" y="17.5" width="260" height="185" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-10" value="&lt;div style=&quot;text-align: left; font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;u&gt;pop_filefd&lt;/u&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;open(infile, O_RDONLY)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;infile has to exist&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;open(outfile,O_WRONLY | O_TRUNC | O_CREAT, 0777)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;if outfile exist, content will be overwritten. if it does not exist, create it. 0777 is for permission&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="910" y="8.75" width="320" height="202.5" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-12" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;u&gt;Exec_pipe func&lt;/u&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;get_envpath func&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;while loop&amp;nbsp;&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="240" y="240" width="300" height="190" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shape=link;" edge="1" parent="1" source="Xo_m1RiFRlMSzJI0WYCG-13" target="Xo_m1RiFRlMSzJI0WYCG-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-13" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;u&gt;Get_envpath func&lt;/u&gt;&lt;br&gt;Find string starting with the with &quot;PATH&quot; from all env_var&lt;br&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="580" y="240" width="250" height="130" as="geometry" />
        </mxCell>
        <mxCell id="Xo_m1RiFRlMSzJI0WYCG-15" value="&lt;br&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;programs like ls, wc, grep, awk, echo, cat should exist in one of the folder listed in PATH&lt;/font&gt;&lt;br&gt;Example of envp&lt;br&gt;&lt;div&gt;SYSTEMD_EXEC_PID=401723&lt;/div&gt;&lt;div&gt;SSH_AUTH_SOCK=/run/user/101135/keyring/ssh&lt;/div&gt;&lt;div&gt;SESSION_MANAGER=local/c2r3s10.42singapore.sg:@/tmp/.ICE-unix/401557,unix/c2r3s10.42singapore.sg:/tmp/.ICE-unix/401557&lt;/div&gt;&lt;div&gt;LANG=en_US.UTF-8&lt;/div&gt;&lt;div&gt;XDG_CURRENT_DESKTOP=ubuntu:GNOME&lt;/div&gt;&lt;div&gt;COLORTERM=truecolor&lt;/div&gt;&lt;div&gt;GIO_LAUNCHED_DESKTOP_FILE_PID=402133&lt;/div&gt;&lt;div&gt;XDG_GREETER_DATA_DIR=/var/lib/lightdm-data/titan&lt;/div&gt;&lt;div&gt;TERMINATOR_UUID=urn:uuid:07a7c037-27ca-43ab-a8d9-0a0883834bbe&lt;/div&gt;&lt;div&gt;LIBVIRT_DEFAULT_URI=qemu:///system&lt;/div&gt;&lt;div&gt;GPG_AGENT_INFO=/run/user/101135/gnupg/S.gpg-agent:0:1&lt;/div&gt;&lt;div&gt;DESKTOP_SESSION=ubuntu&lt;/div&gt;&lt;div&gt;USER=titan&lt;/div&gt;&lt;div&gt;XDG_MENU_PREFIX=gnome-&lt;/div&gt;&lt;div&gt;XDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session9&lt;/div&gt;&lt;div&gt;QT_IM_MODULE=ibus&lt;/div&gt;&lt;div&gt;HOME=/home/titan&lt;/div&gt;&lt;div&gt;DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/101135/bus&lt;/div&gt;&lt;div&gt;DOCKER_HOST=unix:///run/user/101135/docker.sock&lt;/div&gt;&lt;div&gt;SSH_AGENT_LAUNCHER=gnome-keyring&lt;/div&gt;&lt;div&gt;GTK_MODULES=gail:atk-bridge&lt;/div&gt;&lt;div&gt;XDG_DATA_DIRS=/usr/share/ubuntu:/usr/share/gnome:/home/titan/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:/usr/local/share:/usr/share:/var/lib/snapd/desktop&lt;/div&gt;&lt;div&gt;XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/etc/xdg&lt;/div&gt;&lt;div&gt;XDG_SESSION_DESKTOP=ubuntu&lt;/div&gt;&lt;div&gt;JOURNAL_STREAM=8:2379444&lt;/div&gt;&lt;div&gt;KRB5CCNAME=FILE:/tmp/krb5cc_101135_sGGAx0&lt;/div&gt;&lt;div&gt;GNOME_DESKTOP_SESSION_ID=this-is-deprecated&lt;/div&gt;&lt;div&gt;MANAGERPID=400904&lt;/div&gt;&lt;div&gt;QT_ACCESSIBILITY=1&lt;/div&gt;&lt;div&gt;LOGNAME=titan&lt;/div&gt;&lt;div&gt;XDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0&lt;/div&gt;&lt;div&gt;VTE_VERSION=6800&lt;/div&gt;&lt;div&gt;PATH=/home/titan/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="900" y="240" width="610" height="630" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
